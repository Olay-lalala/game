<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>英语人称代词记忆翻卡游戏</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 20px;
            width: 100%;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.2rem;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        
        .game-description {
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            max-width: 800px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .color-legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .color-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .color-box {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        .nominative {
            background-color: #3498db;
        }
        
        .objective {
            background-color: #e67e22;
        }
        
        .possessive {
            background-color: #e84393;
        }
        
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 50px;
            background-color: #2ecc71;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .mode-btn.active {
            background-color: #2980b9;
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 800px;
            margin-bottom: 20px;
            background-color: white;
            padding: 10px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .game-board {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
        }
        
        .card {
            aspect-ratio: 3/4;
            perspective: 1000px;
            cursor: pointer;
        }
        
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        
        .card.matched .card-inner {
            transform: rotateY(180deg);
        }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .card-front {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
        }
        
        .card-back {
            transform: rotateY(180deg);
            color: white;
        }
        
        .nominative-card {
            background-color: #3498db;
        }
        
        .objective-card {
            background-color: #e67e22;
        }
        
        .possessive-card {
            background-color: #e84393;
        }
        
        .matched-card {
            background-color: #2ecc71 !important;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 100;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .modal h2 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .modal p {
            margin-bottom: 20px;
            font-size: 1.1rem;
        }
        
        @media (max-width: 768px) {
            .game-board {
                grid-template-columns: repeat(4, 1fr);
            }
            
            h1 {
                font-size: 1.8rem;
            }
        }
        
        @media (max-width: 480px) {
            .game-board {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .game-controls {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>英语人称代词记忆翻卡游戏</h1>
        <div class="game-description">
            <p>游戏规则：点击卡片翻开，寻找匹配的人称代词对。主格与宾格配对，或主格与形容词性物主代词配对。</p >
            <div class="color-legend">
                <div class="color-item">
                    <div class="color-box nominative"></div>
                    <span>主格</span>
                </div>
                <div class="color-item">
                    <div class="color-box objective"></div>
                    <span>宾格</span>
                </div>
                <div class="color-item">
                    <div class="color-box possessive"></div>
                    <span>形容词性物主代词</span>
                </div>
            </div>
        </div>
    </header>
    
    <div class="game-controls">
        <button id="mode1" class="mode-btn active">主格 ↔ 宾格配对</button>
        <button id="mode2" class="mode-btn">主格 ↔ 形容词性物主代词配对</button>
        <button id="restart">重新开始游戏</button>
    </div>
    
    <div class="game-info">
        <div>匹配对数: <span id="matches">0</span>/7</div>
        <div>尝试次数: <span id="attempts">0</span></div>
    </div>
    
    <div class="game-board" id="gameBoard"></div>
    
    <div class="modal" id="winModal">
        <div class="modal-content">
            <h2>恭喜你！</h2>
            <p>你成功完成了所有配对！</p >
            <p>尝试次数: <span id="finalAttempts">0</span></p >
            <button id="playAgain">再玩一次</button>
        </div>
    </div>

    <script>
        // 人称代词数据
        const pronouns = [
            { nominative: "I", objective: "me", possessive: "my" },
            { nominative: "you", objective: "you", possessive: "your" },
            { nominative: "he", objective: "him", possessive: "his" },
            { nominative: "she", objective: "her", possessive: "her" },
            { nominative: "it", objective: "it", possessive: "its" },
            { nominative: "we", objective: "us", possessive: "our" },
            { nominative: "they", objective: "them", possessive: "their" }
        ];

        // 游戏状态
        let gameState = {
            mode: 1, // 1: 主格-宾格, 2: 主格-形容词性物主代词
            cards: [],
            flippedCards: [],
            matches: 0,
            attempts: 0,
            canFlip: true
        };

        // DOM 元素
        const gameBoard = document.getElementById('gameBoard');
        const matchesElement = document.getElementById('matches');
        const attemptsElement = document.getElementById('attempts');
        const mode1Btn = document.getElementById('mode1');
        const mode2Btn = document.getElementById('mode2');
        const restartBtn = document.getElementById('restart');
        const winModal = document.getElementById('winModal');
        const finalAttemptsElement = document.getElementById('finalAttempts');
        const playAgainBtn = document.getElementById('playAgain');

        // 初始化游戏
        function initGame() {
            gameBoard.innerHTML = '';
            gameState.cards = [];
            gameState.flippedCards = [];
            gameState.matches = 0;
            gameState.attempts = 0;
            gameState.canFlip = true;
            
            matchesElement.textContent = '0';
            attemptsElement.textContent = '0';
            
            // 创建卡片数组
            let cardData = [];
            
            pronouns.forEach(pronoun => {
                if (gameState.mode === 1) {
                    // 主格-宾格模式
                    cardData.push({
                        type: 'nominative',
                        content: pronoun.nominative,
                        pair: pronoun.objective
                    });
                    cardData.push({
                        type: 'objective',
                        content: pronoun.objective,
                        pair: pronoun.nominative
                    });
                } else {
                    // 主格-形容词性物主代词模式
                    cardData.push({
                        type: 'nominative',
                        content: pronoun.nominative,
                        pair: pronoun.possessive
                    });
                    cardData.push({
                        type: 'possessive',
                        content: pronoun.possessive,
                        pair: pronoun.nominative
                    });
                }
            });
            
            // 洗牌
            cardData = shuffleArray(cardData);
            
            // 创建卡片元素
            cardData.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.dataset.index = index;
                
                cardElement.innerHTML = `
                    <div class="card-inner">
                        <div class="card-front"></div>
                        <div class="card-back ${card.type}-card">${card.content}</div>
                    </div>
                `;
                
                cardElement.addEventListener('click', () => flipCard(cardElement, card));
                gameBoard.appendChild(cardElement);
                
                // 保存卡片数据到游戏状态
                gameState.cards.push({
                    element: cardElement,
                    type: card.type,
                    content: card.content,
                    pair: card.pair,
                    isFlipped: false,
                    isMatched: false
                });
            });
        }

        // 洗牌函数
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // 翻转卡片
        function flipCard(cardElement, cardData) {
            const index = parseInt(cardElement.dataset.index);
            const card = gameState.cards[index];
            
            // 如果卡片已匹配或已翻转，或正在处理翻转，则不允许翻转
            if (card.isMatched || card.isFlipped || !gameState.canFlip || gameState.flippedCards.length >= 2) {
                return;
            }
            
            // 翻转卡片
            cardElement.classList.add('flipped');
            card.isFlipped = true;
            gameState.flippedCards.push(card);
            
            // 检查是否已翻开两张卡片
            if (gameState.flippedCards.length === 2) {
                gameState.canFlip = false;
                gameState.attempts++;
                attemptsElement.textContent = gameState.attempts;
                
                checkForMatch();
            }
        }

        // 检查匹配
        function checkForMatch() {
            const [card1, card2] = gameState.flippedCards;
            
            // 检查是否匹配
            if ((card1.type === 'nominative' && card2.content === card1.pair) ||
                (card2.type === 'nominative' && card1.content === card2.pair)) {
                // 匹配成功
                setTimeout(() => {
                    card1.isMatched = true;
                    card2.isMatched = true;
                    
                    card1.element.classList.add('matched');
                    card2.element.classList.add('matched');
                    
                    card1.element.querySelector('.card-back').classList.add('matched-card');
                    card2.element.querySelector('.card-back').classList.add('matched-card');
                    
                    gameState.matches++;
                    matchesElement.textContent = gameState.matches;
                    
                    resetFlippedCards();
                    
                    // 检查游戏是否完成
                    if (gameState.matches === 7) {
                        setTimeout(() => {
                            finalAttemptsElement.textContent = gameState.attempts;
                            winModal.style.display = 'flex';
                        }, 500);
                    }
                }, 500);
            } else {
                // 匹配失败
                setTimeout(() => {
                    card1.element.classList.remove('flipped');
                    card2.element.classList.remove('flipped');
                    
                    card1.isFlipped = false;
                    card2.isFlipped = false;
                    
                    resetFlippedCards();
                }, 1000);
            }
        }

        // 重置翻转的卡片
        function resetFlippedCards() {
            gameState.flippedCards = [];
            gameState.canFlip = true;
        }

        // 事件监听器
        mode1Btn.addEventListener('click', () => {
            if (gameState.mode !== 1) {
                gameState.mode = 1;
                mode1Btn.classList.add('active');
                mode2Btn.classList.remove('active');
                initGame();
            }
        });

        mode2Btn.addEventListener('click', () => {
            if (gameState.mode !== 2) {
                gameState.mode = 2;
                mode2Btn.classList.add('active');
                mode1Btn.classList.remove('active');
                initGame();
            }
        });

        restartBtn.addEventListener('click', initGame);

        playAgainBtn.addEventListener('click', () => {
            winModal.style.display = 'none';
            initGame();
        });

        // 初始化游戏
        initGame();
    </script>
</body>
</html>